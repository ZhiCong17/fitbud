var e="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var t={};(function(e,n){n(t)})(0,(function(t){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _defineProperty(e,t,n){t=_toPropertyKey(t);t in e?Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true}):e[t]=n;return e}function _toPrimitive(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===typeof t?t:String(t)}function leftPadding(e,t,n){var r;var i="";e="number"===typeof e?String(e):e;if(e.length>t)return e;for(r=0;r<t;r+=1)i+=String(n);return(i+e).slice(-i.length)}function TimeCounter(){this.reset()}
/**
   * [toString convert the counted values on a string]
   * @param  {array} units           [array with the units to display]
   * @param  {string} separator       [separator of the units]
   * @param  {number} leftZeroPadding [number of zero padding]
   * @return {string}                 [result string]
   */TimeCounter.prototype.toString=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["hours","minutes","seconds"];var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:":";var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;t=t||["hours","minutes","seconds"];n=n||":";r=r||2;var i=[];var s;for(s=0;s<t.length;s+=1)void 0!==(this||e)[t[s]]&&("secondTenths"===t[s]?i.push((this||e)[t[s]]):i.push(leftPadding((this||e)[t[s]],r,"0")));return i.join(n)};TimeCounter.prototype.reset=function(){(this||e).secondTenths=0;(this||e).seconds=0;(this||e).minutes=0;(this||e).hours=0;(this||e).days=0};function EventEmitter(){(this||e).events={}}EventEmitter.prototype.on=function(t,n){var r=this||e;Array.isArray((this||e).events[t])||((this||e).events[t]=[]);(this||e).events[t].push(n);return function(){return r.removeListener(t,n)}};EventEmitter.prototype.removeListener=function(t,n){if(Array.isArray((this||e).events[t])){var r=(this||e).events[t].indexOf(n);r>-1&&(this||e).events[t].splice(r,1)}};EventEmitter.prototype.removeAllListeners=function(t){t?Array.isArray((this||e).events[t])&&((this||e).events[t]=[]):(this||e).events={}};EventEmitter.prototype.emit=function(t){var n=this||e;for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];Array.isArray((this||e).events[t])&&(this||e).events[t].forEach((function(e){return e.apply(n,i)}))};var n=10;var r=60;var i=60;var s=24;var o=0;var a=1;var u=2;var c=3;var d=4;var v="secondTenths";var f="seconds";var l="minutes";var p="hours";var h="days";var m=[v,f,l,p,h];var y={secondTenths:100,seconds:1e3,minutes:6e4,hours:36e5,days:864e5};var g={secondTenths:n,seconds:r,minutes:i,hours:s};function mod(e,t){return(e%t+t)%t}function Timer(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var T=new TimeCounter;var E=new TimeCounter;var b;var P=new EventEmitter;var w=false;var A=false;var S;var j;var O;var V={};var _;var C;var U;var L;var D;var I;var M={detail:{timer:this||e}};setParams(t);function updateCounters(e,t){var n=g[e];E[e]=t;T[e]=e===h?Math.abs(t):mod(t>=0?t:n-mod(t,n),n)}function updateDays(e){return updateUnitByPrecision(e,h)}function updateHours(e){return updateUnitByPrecision(e,p)}function updateMinutes(e){return updateUnitByPrecision(e,l)}function updateSeconds(e){return updateUnitByPrecision(e,f)}function updateSecondTenths(e){return updateUnitByPrecision(e,v)}function updateUnitByPrecision(e,t){var n=E[t];updateCounters(t,calculateIntegerUnitQuotient(e,y[t]));return E[t]!==n}function stopTimerAndResetCounters(){stopTimer();resetCounters()}function stopTimer(){clearInterval(b);b=void 0;w=false;A=false}function setParamsAndStartTimer(e){if(isPaused()){D=calculateStartingDate();C=setTarget(_.target)}else setParams(e);startTimer()}function startTimer(){var e=y[S];if(!isTargetAchieved(roundTimestamp(Date.now()))){b=setInterval(updateTimerAndDispatchEvents,e);w=true;A=false}}function calculateStartingDate(){return roundTimestamp(Date.now())-E.secondTenths*y[v]*j}function updateTimerAndDispatchEvents(){var e=roundTimestamp(Date.now());var t=updateTimer();dispatchEvents(t);O(M.detail.timer);if(isTargetAchieved(e)){stop();dispatchEvent("targetAchieved",M)}}function updateTimer(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:roundTimestamp(Date.now());var t=j>0?e-D:D-e;var n={};n[v]=updateSecondTenths(t);n[f]=updateSeconds(t);n[l]=updateMinutes(t);n[p]=updateHours(t);n[h]=updateDays(t);return n}function roundTimestamp(e){return Math.floor(e/y[S])*y[S]}function dispatchEvents(e){e[v]&&dispatchEvent("secondTenthsUpdated",M);e[f]&&dispatchEvent("secondsUpdated",M);e[l]&&dispatchEvent("minutesUpdated",M);e[p]&&dispatchEvent("hoursUpdated",M);e[h]&&dispatchEvent("daysUpdated",M)}function isTargetAchieved(e){return C instanceof Array&&e>=I}function resetCounters(){T.reset();E.reset()}function setParams(e){e=e||{};S=checkPrecision(e.precision);O="function"===typeof e.callback?e.callback:function(){};L=true===e.countdown;j=true===L?-1:1;"object"===_typeof(e.startValues)?setStartValues(e.startValues):U=null;D=calculateStartingDate();updateTimer();if("object"===_typeof(e.target))C=setTarget(e.target);else if(L){e.target={seconds:0};C=setTarget(e.target)}else C=null;V={precision:S,callback:O,countdown:"object"===_typeof(e)&&true===e.countdown,target:C,startValues:U};_=e}function checkPrecision(e){e="string"===typeof e?e:f;if(!isValidInputValue(e))throw new Error("Error in precision parameter: ".concat(e," is not a valid value"));return e}function isValidInputValue(e){return m.indexOf(e)>=0}function configInputValues(e){var t;if("object"===_typeof(e))if(e instanceof Array){if(5!==e.length)throw new Error("Array size not valid");t=e}else{for(var v in e)if(m.indexOf(v)<0)throw new Error("Error in startValues or target parameter: ".concat(v," is not a valid input value"));t=[e.secondTenths||0,e.seconds||0,e.minutes||0,e.hours||0,e.days||0]}t=t.map((function(e){return parseInt(e,10)}));var f=t[o];var l=t[a]+calculateIntegerUnitQuotient(f,n);var p=t[u]+calculateIntegerUnitQuotient(l,r);var h=t[c]+calculateIntegerUnitQuotient(p,i);var y=t[d]+calculateIntegerUnitQuotient(h,s);t[o]=f%n;t[a]=l%r;t[u]=p%i;t[c]=h%s;t[d]=y;return t}function calculateIntegerUnitQuotient(e,t){var n=e/t;return n<0?Math.ceil(n):Math.floor(n)}function setTarget(e){if(e){C=configInputValues(e);var t=calculateTotalCounterFromValues(C);I=D+t.secondTenths*y[v]*j;return C}}function setStartValues(e){U=configInputValues(e);T.secondTenths=U[o];T.seconds=U[a];T.minutes=U[u];T.hours=U[c];T.days=U[d];E=calculateTotalCounterFromValues(U,E)}function calculateTotalCounterFromValues(e,t){var v=t||{};v.days=e[d];v.hours=v.days*s+e[c];v.minutes=v.hours*i+e[u];v.seconds=v.minutes*r+e[a];v.secondTenths=v.seconds*n+e[[o]];return v}function stop(){stopTimerAndResetCounters();dispatchEvent("stopped",M)}function reset(){stopTimerAndResetCounters();setParamsAndStartTimer(_);dispatchEvent("reset",M)}
/**
     * [start starts the timer configured by the params object. Dispatch started event]
     * @param  {object} params [Configuration parameters]
     */function start(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=_objectSpread2(_objectSpread2({},t),e);if(!isRunning()){setParamsAndStartTimer(e);dispatchEvent("started",M)}}function pause(){stopTimer();A=true;dispatchEvent("paused",M)}
/**
     * [addEventListener Adds event listener to the timer]
     * @param {string} eventType      [event to listen]
     * @param {function} listener   [the event listener function]
     */function addEventListener(e,t){P.on(e,t)}
/**
     * [removeEventListener Removes event listener to the timer]
     * @param  {string} eventType    [event to remove listener]
     * @param  {function} listener [listener to remove]
     */function removeEventListener(e,t){P.removeListener(e,t)}
/**
     * [removeAllEventListeners Removes all events listeners for the given type, no type to remove all types]
     * @param  {string} [eventType]  [event to remove listener]
     */function removeAllEventListeners(e){P.removeAllListeners(e)}
/**
     * [dispatchEvent dispatches an event]
     * @param  {string} eventType [event to dispatch]
     * @param data
     */function dispatchEvent(e,t){P.emit(e,t)}function isRunning(){return w}function isPaused(){return A}function getTimeValues(){return T}function getTotalTimeValues(){return E}function getConfig(){return V}if("undefined"!==typeof(this||e)){(this||e).start=start;(this||e).pause=pause;(this||e).stop=stop;(this||e).reset=reset;(this||e).isRunning=isRunning;(this||e).isPaused=isPaused;(this||e).getTimeValues=getTimeValues;(this||e).getTotalTimeValues=getTotalTimeValues;(this||e).getConfig=getConfig;(this||e).addEventListener=addEventListener;(this||e).on=addEventListener;(this||e).removeEventListener=removeEventListener;(this||e).removeAllEventListeners=removeAllEventListeners;(this||e).off=removeEventListener}}t.Timer=Timer;t.default=Timer;Object.defineProperty(t,"__esModule",{value:true})}));const n=t.Timer,r=t.__esModule;export{n as Timer,r as __esModule,t as default};

